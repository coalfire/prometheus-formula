prometheus:
  server:
    version: 2.4.2
    source_hash: sha256=cd32b6862eab4b5b6c5ed81a2aa951ebeba8b35506418c21d1f5f18fa346fcd0
    arch: linux-amd64
    install_dir: /opt
    source: 'https://github.com/prometheus/prometheus/releases/download'
    args:
      config_file: /etc/prometheus/prometheus.yml
      storage:
        local_path: /var/lib/prometheus/metrics
    config:
      global:
        scrape_interval: 15s
        evaluation_interval: 15s
      scrape_configs:
        - job_name: 'prometheus'
          scrape_interval: 5s
          static_configs:
            - targets: ['localhost:9090']
        - job_name: 'node'
          scrape_interval: 5s
          static_configs:
            - targets: ['localhost:9100']
  alertmanager:
    version: 2.4.2
    source_hash: sha256=79ee23ab2f0444f592051995728ba9e0a7547cc3b9162301e3152dbeaf568d2e
    arch: linux-amd64
    install_dir: /opt
    source: https://github.com/prometheus/alertmanager/releases/download
    args:
      config_file: /etc/alertmanager/alertmanager.yml
      storage:
        path: /var/lib/alertmanager
    config:
      global:
        smtp_smarthost: "localhost:25"
        smtp_from: 'alertmanager@example.org'
        smtp_auth_username: 'alertmanager'
        smtp_auth_password: 'password'
      templates:
        - "/etc/alertmanager/template/*.tmpl"
      route:
        group_by: ['alertname', 'cluster', 'service']
        group_wait: 30s
        group_interval: 5m
        repeat_interval: 3h
        receiver: team-X-mails
        routes:
        - match_re:
            service: ^(foo1|foo2|baz)$
          receiver: team-X-mails
      inhibit_rules:
      - source_match:
          severity: 'critical'
        target_match:
          severity: 'warning'
        equal: ['alertname', 'cluster', 'service']
      receivers:
      - name: 'team-X-mails'
        email_configs:
        - to: 'team-X+alerts@example.org'
  exporters:
    node:
      version: 2.4.2
      source_hash: sha256=79ee23ab2f0444f592051995728ba9e0a7547cc3b9162301e3152dbeaf568d2e
      arch: linux-amd64
      install_dir: /opt
      source: https://github.com/prometheus/node_exporter/releases/download
